<% cl = 'table-warning' if transaction.sell? %>
<tr class="<%= cl %>">
<td><%= transaction.position.symbol %></td>
<td><%= transaction.date.to_date rescue '-' %></td>
<td><%= transaction.tr_type_str %></td>
<td><%= transaction.qty.to_i %></td>
<td><%= to_currency transaction.price, precision: 2, locale: transaction.locale %></td>
<td><%= to_currency transaction.amount, precision: 0, locale: transaction.locale %></td>
<td><%= to_currency transaction.fees, precision: 2, locale: transaction.locale if transaction.fees.abs > 0 %></td>
<td><%= to_currency transaction.gain, precision: 2, locale: transaction.locale if transaction.gain.abs > 0 %></td>
<td><%= transaction.ttl_qty %></td>
<td><%= to_currency transaction.ttl_acb, precision: 0, locale: transaction.locale if transaction.ttl_acb %></td>
<td><%= to_currency transaction.acb_share, precision: 4, locale: transaction.locale if transaction.acb_share.abs > 0 %></td>
<td><%= transaction.note %></td>
<td><%= link_to '<i class="bi-pencil-square"></i>'.html_safe, edit_portfolio_position_transaction_path(@portfolio,transaction.position,transaction) %> </td>
<td><%= link_to '<i class="bi-trash"></i>'.html_safe, portfolio_position_transaction_path(@portfolio,transaction.position,transaction), method: :delete, data: { confirm: "Are you sure you want to delete transaction for #{transaction.position.symbol}?" } %></td> 
</tr>


